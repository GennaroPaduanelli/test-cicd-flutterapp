"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2875],{2875:(W,d,r)=>{r.r(d),r.d(d,{LavorazioniPageModule:()=>J});var m=r(6895),s=r(433),g=r(603),z=r(1383),u=r(7486),e=r(4650),C=r(1364),h=r(5593),v=r(1493),T=r(805),_=r(5702),p=r(403),L=r(1740),f=r(5047);const b=["dt"];function M(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.apriModale())}),e.qZA(),e._uU(1,"\xa0 "),e._UZ(2,"button",14),e._uU(3,"\xa0 "),e._UZ(4,"button",15),e._uU(5,"\xa0 "),e.TgZ(6,"span",16),e._UZ(7,"i",17),e.TgZ(8,"input",18),e.NdJ("input",function(i){e.CHM(a);const l=e.oxw();return e.KtG(l.applyFilterGlobal(i,"contains"))}),e.qZA()()}if(2&t){const a=e.oxw();e.xp6(4),e.Q6J("disabled",!a.lavorazioni.length)}}function x(t,n){1&t&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2," Lavorazione"),e._UZ(3,"p-sortIcon",20),e.qZA(),e.TgZ(4,"th",21),e._uU(5," NumeroPassate "),e._UZ(6,"p-sortIcon",22),e.qZA(),e.TgZ(7,"th",21),e._uU(8," KgCo2Ettaro "),e._UZ(9,"p-sortIcon",22),e.qZA(),e.TgZ(10,"th",21),e._uU(11," M3BlueWaterEttaro "),e._UZ(12,"p-sortIcon",22),e.qZA(),e._UZ(13,"th"),e.qZA())}function P(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"tr")(1,"td",23),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._uU(4),e.qZA(),e.TgZ(5,"td",23),e._uU(6),e.qZA(),e.TgZ(7,"td",23),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",24),e.NdJ("click",function(){const l=e.CHM(a).$implicit,c=e.oxw();return e.KtG(c.aggiornaLavorazione(l))}),e.qZA(),e.TgZ(11,"button",25),e.NdJ("click",function(){const l=e.CHM(a).$implicit,c=e.oxw();return e.KtG(c.eliminaLavorazione(l))}),e.qZA()()()}if(2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.operazione),e.xp6(2),e.Oqu(a.numeroPassate),e.xp6(2),e.Oqu(a.kgCo2Ettaro),e.xp6(2),e.Oqu(a.m3BlueWaterEttaro)}}function E(t,n){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.hij(" In totale ci sono ",a.lavorazioni?a.lavorazioni.length:0," lavorazioni. ")}}function Z(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"p-dropdown",34),e.NdJ("ngModelChange",function(i){e.CHM(a);const l=e.oxw(2);return e.KtG(l.selectedTipoLavorazione=i)}),e.qZA()}if(2&t){const a=e.oxw(2);e.Q6J("options",a.tipiLavorazione)("ngModel",a.selectedTipoLavorazione)}}function A(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",27)(1,"label",35),e._uU(2,"Nome Lavorazione"),e.qZA(),e.TgZ(3,"input",36),e.NdJ("ngModelChange",function(i){e.CHM(a);const l=e.oxw(2);return e.KtG(l.nomeLavorazione=i)}),e.qZA()()}if(2&t){const a=e.oxw(2);e.xp6(3),e.Q6J("disabled",!0)("ngModel",a.nomeLavorazione)}}function k(t,n){1&t&&e._UZ(0,"div")}function N(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Lavorazione"),e.qZA(),e.YNc(3,Z,1,2,"p-dropdown",29),e.qZA(),e.YNc(4,A,4,2,"div",30),e._UZ(5,"br"),e.YNc(6,k,1,0,"div",31),e.TgZ(7,"div",27)(8,"label",32),e._uU(9,"Numero Passate"),e.qZA(),e.TgZ(10,"p-inputNumber",33),e.NdJ("ngModelChange",function(i){e.CHM(a);const l=e.oxw();return e.KtG(l.selectedNumeroPassate=i)}),e.qZA()()}if(2&t){const a=e.oxw();e.xp6(3),e.Q6J("ngIf",!a.updating),e.xp6(1),e.Q6J("ngIf",a.updating),e.xp6(2),e.Q6J("ngIf",a.enable),e.xp6(4),e.Q6J("ngModel",a.selectedNumeroPassate)("showButtons",!0)("min",1)("required",!0)}}function U(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.chiudiDialogLavorazione())}),e.qZA(),e.TgZ(1,"button",38),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.salvaLavorazione())}),e.qZA()}}const B=function(){return["operazione","co2Ettaro","numeroPassate"]},S=function(){return{width:"450px"}};class R{}const w=[{path:"",component:(()=>{class t{constructor(a){this.misurazioneService=a,this.submitted=!1,this.lavorazioni=[],this.lavorazioniSelezionate=[],this.dialogLavorazioni=!1,this.tipiLavorazione=[],this.formExtended=!1,this.updating=!1,this.listVelocita=[],this.listForzaLavoro=[],this.enable=!1,this.tipiLavorazioneCheck=[],this.tipiLavorazioneCheckWithoutAltreLavorazioni=[],this.tipiLavorazione=[{name:"Aratura",code:"Aratura",kgCo2Ettaro:121,m3BlueWaterEttaro:294.88},{name:"Frangizollatura",code:"Frangizollatura",kgCo2Ettaro:80.7,m3BlueWaterEttaro:125.01},{name:"Fresatura",code:"Fresatura",kgCo2Ettaro:80.5,m3BlueWaterEttaro:335},{name:"Ripuntatura",code:"Ripuntatura",kgCo2Ettaro:79.7,m3BlueWaterEttaro:94.57},{name:"Rullatura",code:"Rullatura",kgCo2Ettaro:26.4,m3BlueWaterEttaro:165.3},{name:"ErpicaturaRotante",code:"ErpicaturaRotante",kgCo2Ettaro:67.5,m3BlueWaterEttaro:292},{name:"Erpicatura",code:"Erpicatura",kgCo2Ettaro:72.9,m3BlueWaterEttaro:187},{name:"ErpicaturaAMolle",code:"ErpicaturaAMolle",kgCo2Ettaro:25.7,m3BlueWaterEttaro:109}],this.tipiLavorazione.sort((o,i)=>o.name.localeCompare(i.name)),this.tipiLavorazioneCheck=[{name:"Aratura",code:"Aratura",kgCo2Ettaro:121,m3BlueWaterEttaro:294.88},{name:"Frangizollatura",code:"Frangizollatura",kgCo2Ettaro:80.7,m3BlueWaterEttaro:125.01},{name:"Fresatura",code:"Fresatura",kgCo2Ettaro:80.5,m3BlueWaterEttaro:335},{name:"Ripuntatura",code:"Ripuntatura",kgCo2Ettaro:79.7,m3BlueWaterEttaro:94.57},{name:"Rullatura",code:"Rullatura",kgCo2Ettaro:26.4,m3BlueWaterEttaro:165.3},{name:"ErpicaturaRotante",code:"ErpicaturaRotante",kgCo2Ettaro:67.5,m3BlueWaterEttaro:292},{name:"Erpicatura",code:"Erpicatura",kgCo2Ettaro:72.9,m3BlueWaterEttaro:187},{name:"ErpicaturaAMolle",code:"ErpicaturaAMolle",kgCo2Ettaro:25.7,m3BlueWaterEttaro:109}],this.tipiLavorazioneCheck.sort((o,i)=>o.name.localeCompare(i.name)),this.listVelocita=[{name:"4 Km/h",code:4},{name:"7.5 Km/h",code:7.5},{name:"10 Km/h",code:10},{name:"13 Km/h",code:13}],this.listForzaLavoro=[{name:"80%",code:80},{name:"75%",code:75},{name:"70%",code:70},{name:"60%",code:60},{name:"50%",code:50},{name:"40%",code:50},{name:"30%",code:50}],this.misurazione=this.misurazioneService.getMisurazioneLocalStorage(),this.misurazione&&this.misurazione.inputMisurazione&&this.misurazione.inputMisurazione.operazioniColturali.lavorazioni&&(null==this.misurazione.inputMisurazione.operazioniColturali.lavorazioni?(this.misurazione.inputMisurazione.operazioniColturali.lavorazioni=[],this.misurazione.dataOraUltimoAggiornamento=(new Date).toUTCString(),this.misurazioneService.salvaMisurazioneLocalStorage(this.misurazione),this.misurazioneService.updateMisurazione(this.misurazione.nomeMisurazione,this.misurazione)):(this.lavorazioni=this.misurazione.inputMisurazione.operazioniColturali.lavorazioni,this.tipiLavorazione=this.tipiLavorazione.filter(o=>!this.lavorazioni.map(i=>i.operazione).includes(o.name))))}applyFilterGlobal(a,o){this.dt.filterGlobal(a.target.value,o)}apriModale(){this.enable=!1,this.selectedNumeroPassate=1,this.nomeLavorazione="",this.oldNomeLavorazione="",this.velocitaSelezionata=void 0,this.selectedTipoLavorazione=new R,this.caricoLavoroSelezionato=void 0,this.updating=!1,this.tipiLavorazione.length>0&&(this.dialogLavorazioni=!0),this.selectedNumeroPassate=1}aggiornaLavorazione(a){this.updating=!0,this.selectedNumeroPassate=a.numeroPassate,this.nomeLavorazione=a.operazione,this.oldNomeLavorazione=a.operazione,(null==this.selectedTipoLavorazione||this.selectedTipoLavorazione.name!==a.operazione)&&(this.selectedTipoLavorazione=this.tipiLavorazioneCheck.find(o=>o.name==a.operazione)),this.tipiLavorazione.sort((o,i)=>o.name.localeCompare(i.name)),this.dt.totalRecords=this.lavorazioni.length,this.enable=!!this.tipiLavorazioneCheck.find(o=>o.name==this.nomeLavorazione),this.dialogLavorazioni=!0}eliminaLavorazione(a){this.lavorazioni=this.lavorazioni.filter(o=>o.operazione!=a.operazione),this.misurazione.inputMisurazione.operazioniColturali.lavorazioni=this.lavorazioni,this.misurazione.dataOraUltimoAggiornamento=(new Date).toUTCString(),this.misurazioneService.salvaMisurazioneLocalStorage(this.misurazione),this.misurazioneService.updateMisurazione(this.misurazione.nomeMisurazione,this.misurazione),!this.tipiLavorazione.find(o=>o.name==a.operazione)&&this.tipiLavorazioneCheck.map(o=>o.name).includes(a.operazione)&&(this.tipiLavorazione.push({name:a.operazione,code:a.operazione,m3BlueWaterEttaro:parseFloat(a.m3BlueWaterEttaro)/a.numeroPassate,kgCo2Ettaro:parseFloat(a.kgCo2Ettaro)/a.numeroPassate}),this.tipiLavorazione.sort((o,i)=>o.name.localeCompare(i.name))),this.selectedTipoLavorazione=void 0,this.nomeLavorazione="",this.velocitaSelezionata=void 0,this.caricoLavoroSelezionato=void 0,this.dt.totalRecords=this.lavorazioni.length}chiudiDialogLavorazione(){this.dialogLavorazioni=!1,this.lavorazioni.filter(a=>"AltreLavorazioni"!==a.name).forEach(a=>{let o=this.tipiLavorazione.find(i=>i.name==a.operazione);o&&(this.tipiLavorazione=this.tipiLavorazione.filter(i=>i.name!==(null==o?void 0:o.name)))})}salvaLavorazione(){this.lavorazioni.find(a=>a.operazione==this.selectedTipoLavorazione.name)&&(this.lavorazioni=this.lavorazioni.filter(a=>a.operazione!==this.selectedTipoLavorazione.name)),this.lavorazione={},this.lavorazione.numeroPassate=this.selectedNumeroPassate,this.lavorazione.kgCo2Ettaro=(this.selectedTipoLavorazione.kgCo2Ettaro*this.selectedNumeroPassate).toFixed(3).toString(),this.lavorazione.m3BlueWaterEttaro=(this.selectedTipoLavorazione.m3BlueWaterEttaro*this.selectedNumeroPassate).toFixed(3).toString(),this.lavorazione.operazione=this.selectedTipoLavorazione.name,this.lavorazioni=this.lavorazioni.filter(a=>a.operazione!==this.lavorazione.operazione),this.tipiLavorazione=this.tipiLavorazione.filter(a=>a.name!==this.lavorazione.operazione),this.lavorazioni.push(this.lavorazione),this.misurazione.inputMisurazione.operazioniColturali.lavorazioni=this.lavorazioni,this.misurazione.dataOraUltimoAggiornamento=(new Date).toUTCString(),this.misurazioneService.salvaMisurazioneLocalStorage(this.misurazione),this.misurazioneService.updateMisurazione(this.misurazione.nomeMisurazione,this.misurazione),this.tipiLavorazione=this.tipiLavorazione.filter(a=>a.name!=this.lavorazione.operazione),this.dialogLavorazioni=!1,this.dt.totalRecords=this.lavorazioni.length}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(C.Hc))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lavorazioni"]],viewQuery:function(a,o){if(1&a&&e.Gf(b,5),2&a){let i;e.iGM(i=e.CRH())&&(o.dt=i.first)}},decls:15,vars:14,consts:[[1,"container"],["id","card",1,"card"],["styleClass","p-mb-4"],[1,"title"],["pTemplate","left"],["scrollHeight","310px","dataKey","id","currentPageReportTemplate","Visualizzazione {first} su {last} di totale {totalRecords} voci",1,"table",3,"value","rows","paginator","virtualScroll","globalFilterFields","selection","rowHover","showCurrentPageReport","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Dettagli lavorazione","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],["pTemplate","content"],["pTemplate","footer"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-success","p-mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-arrow-left","routerLink","/home-input",1,"p-button-primary","p-mr-2"],["pButton","","pRipple","","icon","pi pi-arrow-right","routerLink","/altre-lavorazioni",1,"p-button-primary","p-mr-2",3,"disabled"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Ricerca...",1,"txt-search",3,"input"],["pSortableColumn","operazione",1,"t-header"],["field","name"],["pSortableColumn","numeroPassate",1,"t-header"],["field","price"],[1,"btn-edit"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","p-mr-2","btn-edit",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning","btn-edit",3,"click"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"p-field"],["for","tipoLavorazioneList"],["id","tipoLavorazioneList","optionLabel","name",3,"options","ngModel","ngModelChange",4,"ngIf"],["class","p-field",4,"ngIf"],[4,"ngIf"],["for","numeroPassate"],[3,"ngModel","showButtons","min","required","ngModelChange"],["id","tipoLavorazioneList","optionLabel","name",3,"options","ngModel","ngModelChange"],["for","nomeLavorazione"],["id","nomeLavorazione","type","text","placeholder","Nome Lavorazione","pInputText","",3,"disabled","ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-toolbar",2)(3,"h2",3),e._uU(4,"Lavorazioni"),e.qZA(),e._UZ(5,"br"),e.YNc(6,M,9,1,"ng-template",4),e.qZA(),e.TgZ(7,"p-table",5,6),e.NdJ("selectionChange",function(l){return o.lavorazioniSelezionate=l}),e.YNc(9,x,14,0,"ng-template",7),e.YNc(10,P,12,4,"ng-template",8),e.YNc(11,E,2,1,"ng-template",9),e.qZA()(),e.TgZ(12,"p-dialog",10),e.NdJ("visibleChange",function(l){return o.dialogLavorazioni=l})("onHide",function(){return o.chiudiDialogLavorazione()}),e.YNc(13,N,11,7,"ng-template",11),e.YNc(14,U,2,0,"ng-template",12),e.qZA()()),2&a&&(e.xp6(7),e.Q6J("value",o.lavorazioni)("rows",10)("paginator",!0)("virtualScroll",!1)("globalFilterFields",e.DdM(12,B))("selection",o.lavorazioniSelezionate)("rowHover",!0)("showCurrentPageReport",!0),e.xp6(5),e.Akn(e.DdM(13,S)),e.Q6J("visible",o.dialogLavorazioni)("modal",!0))},dependencies:[m.O5,s.Fj,s.JJ,s.Q7,s.On,z.o,h.Hq,v.V,T.jx,_.Lt,g.YI,p.iA,p.lQ,p.fz,u.rH,L.o,f.Rn],styles:["#card[_ngcontent-%COMP%]{margin-top:16%}.t-header[_ngcontent-%COMP%]{font-size:12px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;font-weight:700;margin-left:0}.container[_ngcontent-%COMP%]{background-image:url(/assets/images/wallpaper.jpg);background-repeat:no-repeat;height:100%;width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.7rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.2rem}[_nghost-%COMP%]     .p-button.p-button-icon-only.p-button-rounded{height:3rem;margin-top:3px}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon{margin-left:.3rem}[_nghost-%COMP%]     .p-toolbar{height:105px}.title[_ngcontent-%COMP%]{margin-top:-1.7rem;padding-left:3rem;padding-bottom:0}[_nghost-%COMP%]     .next-btn{margin:0;padding:0}.txt-search[_ngcontent-%COMP%]{width:190px}"]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(w),u.Bz]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,s.u5,z.V,h.hJ,v.S,_.kW,g.Pc,p.U$,F,L.j,f.L$]}),t})()}}]);