"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9608],{9608:(F,g,a)=>{a.r(g),a.d(g,{MisurazioniPageModule:()=>O});var f=a(6895),u=a(433),b=a(603),m=a(7486),c=a(1364),v=a(5439);function d(e){return v(e).format("yyyy-MM-DD HH:mm:ss")}var i=a(4650),z=a(5593),M=a(1493),x=a(805),h=a(1383),p=a(403),_=a(1740);const T=["dt"];function P(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"button",13),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.apriModale())}),i.qZA(),i._uU(1,"\xa0\xa0\xa0 "),i.TgZ(2,"span",14),i._UZ(3,"i",15),i.TgZ(4,"input",16),i.NdJ("input",function(o){i.CHM(t);const s=i.oxw();return i.KtG(s.applyFilterGlobal(o,"contains"))}),i.qZA()()}}function C(e,r){1&e&&(i.TgZ(0,"tr")(1,"th",17),i._uU(2,"NomeMisurazione"),i._UZ(3,"p-sortIcon",18),i.qZA(),i.TgZ(4,"th",19),i._uU(5,"UltimoAggiornamento"),i._UZ(6,"p-sortIcon",20),i.qZA(),i._UZ(7,"th"),i.qZA())}function Z(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"tr")(1,"td",21),i._uU(2),i.qZA(),i.TgZ(3,"td",21),i._uU(4),i.qZA(),i.TgZ(5,"td")(6,"button",22),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.aggiornaMisurazione(s))}),i.qZA(),i.TgZ(7,"button",23),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.eliminaMisurazione(s))}),i.qZA(),i.TgZ(8,"button",24),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.goToHomeInput(s))}),i.qZA()()()}if(2&e){const t=r.$implicit,n=i.oxw();i.xp6(2),i.Oqu(t.nomeMisurazione),i.xp6(2),i.Oqu(n.convert(t.dataOraUltimoAggiornamento))}}function A(e,r){if(1&e&&(i.TgZ(0,"div",25),i._uU(1),i.qZA()),2&e){const t=i.oxw();i.xp6(1),i.hij(" In totale ci sono ",t.misurazioni?t.misurazioni.length:0," misurazioni. ")}}function N(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",26)(1,"label",27),i._uU(2,"Nome Misurazione"),i.qZA(),i.TgZ(3,"input",28),i.NdJ("ngModelChange",function(o){i.CHM(t);const s=i.oxw();return i.KtG(s.selectedNomeMisurazione=o)}),i.qZA()()}if(2&e){const t=i.oxw();i.xp6(3),i.Q6J("ngModel",t.selectedNomeMisurazione)}}function y(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"button",29),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.chiudiDialogMisurazione())}),i.qZA(),i.TgZ(1,"button",30),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.salvaMisurazione())}),i.qZA()}}const S=function(){return["nomeMisurazione","dataOraUltimoAggiornamento"]},H=function(){return{width:"450px"}},R=[{path:"",component:(()=>{class e{constructor(t,n){this.misurazioneService=t,this.router=n,this.submitted=!1,this.misurazioni=[],this.misurazione=new c.Iz,this.dialogMisurazioni=!1,this.misurazioneService.getAllMisurazioni().valueChanges().subscribe(o=>{this.misurazioni=o})}applyFilterGlobal(t,n){this.dt.filterGlobal(t.target.value,n)}apriModale(){this.dialogMisurazioni=!0,this.misurazione=new c.Iz,this.selectedNomeMisurazione="",this.oldSelectedNomeMisurazione=""}aggiornaMisurazione(t){console.log(t),this.dialogMisurazioni=!0,this.selectedNomeMisurazione=t.nomeMisurazione,this.oldSelectedNomeMisurazione=t.nomeMisurazione,this.dt.totalRecords=this.misurazioni.length}eliminaMisurazione(t){this.misurazioneService.deleteMisurazione(t.nomeMisurazione),this.misurazioni=this.misurazioni.filter(n=>n.nomeMisurazione!=n.nomeMisurazione),this.dt.totalRecords=this.misurazioni.length}chiudiDialogMisurazione(){this.dialogMisurazioni=!1}salvaMisurazione(){this.misurazioni.find(t=>t.nomeMisurazione==this.selectedNomeMisurazione)||(this.dialogMisurazioni=!0,""==this.oldSelectedNomeMisurazione?(this.misurazione=new c.Iz,this.misurazione.nomeMisurazione=this.selectedNomeMisurazione,this.misurazione.dataOraUltimoAggiornamento=d(new Date),this.misurazioneService.saveMisurazione(this.misurazione),this.misurazioni.push(this.misurazione),this.dialogMisurazioni=!1):this.misurazioneService.getIdByNomeMisurazione(this.oldSelectedNomeMisurazione).subscribe(t=>{t&&t.docs&&t.docs[0]&&t.docs[0].id&&this.misurazioneService.getMisurazioneById(t.docs[0].id).subscribe(n=>{let o=n.data();o.nomeMisurazione=this.selectedNomeMisurazione,o.dataOraUltimoAggiornamento=(new Date).toUTCString(),this.misurazioneService.updateMisurazione(this.oldSelectedNomeMisurazione,o),this.misurazioni.push(o),this.dialogMisurazioni=!1})}),this.dt.totalRecords=this.misurazioni.length)}goToHomeInput(t){this.misurazioneService.salvaMisurazioneLocalStorage(t),this.router.navigate(["/home-input"])}convert(t){return d(t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(c.Hc),i.Y36(m.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-misurazioni"]],viewQuery:function(t,n){if(1&t&&i.Gf(T,5),2&t){let o;i.iGM(o=i.CRH())&&(n.dt=o.first)}},decls:15,vars:13,consts:[[1,"container"],["id","card",1,"card"],["styleClass","p-mb-4"],[1,"title"],["pTemplate","left"],["scrollHeight","300px","dataKey","id","currentPageReportTemplate","Visualizzazione {first} su {last} di totale {totalRecords} voci",1,"table",3,"value","rows","paginator","virtualScroll","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Dettagli Misurazione","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],["pTemplate","content"],["pTemplate","footer"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-success","p-mr-2",3,"click"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Ricerca...",1,"txt-search",3,"input"],["pSortableColumn","operazione",1,"t-header"],["field","name"],["pSortableColumn","numeroPassate",1,"t-header"],["field","price"],[1,"btn-edit"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","p-mr-2","btn-edit",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning","btn-edit",3,"click"],["pButton","","pRipple","","icon","pi pi-sign-out",1,"p-button-rounded","p-button-info","btn-edit",3,"click"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"p-field"],["for","numeroPassate"],["type","text","pInputText","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(t,n){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"p-toolbar",2)(3,"h2",3),i._uU(4,"Pratiche Agricole e Informazioni sul Raccolto "),i.qZA(),i._UZ(5,"br"),i.YNc(6,P,5,0,"ng-template",4),i.qZA(),i.TgZ(7,"p-table",5,6),i.YNc(9,C,8,0,"ng-template",7),i.YNc(10,Z,9,2,"ng-template",8),i.YNc(11,A,2,1,"ng-template",9),i.qZA()(),i.TgZ(12,"p-dialog",10),i.NdJ("visibleChange",function(s){return n.dialogMisurazioni=s})("onHide",function(){return n.chiudiDialogMisurazione()}),i.YNc(13,N,4,1,"ng-template",11),i.YNc(14,y,2,0,"ng-template",12),i.qZA()()),2&t&&(i.xp6(7),i.Q6J("value",n.misurazioni)("rows",5)("paginator",!0)("virtualScroll",!1)("globalFilterFields",i.DdM(11,S))("rowHover",!0)("showCurrentPageReport",!0),i.xp6(5),i.Akn(i.DdM(12,H)),i.Q6J("visible",n.dialogMisurazioni)("modal",!0))},dependencies:[u.Fj,u.JJ,u.On,z.Hq,M.V,x.jx,h.o,p.iA,p.lQ,p.fz,_.o],styles:["#card[_ngcontent-%COMP%]{margin-top:16%}.t-header[_ngcontent-%COMP%]{font-size:12px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;font-weight:700;margin-left:0}.container[_ngcontent-%COMP%]{background-image:url(/assets/images/wallpaper.jpg);background-repeat:no-repeat;height:100%;width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.7rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.2rem}[_nghost-%COMP%]     .p-button.p-button-icon-only.p-button-rounded{height:3rem;margin-top:2px;margin-left:3px}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon{margin-left:.3rem}[_nghost-%COMP%]     .p-toolbar{height:105px}.title[_ngcontent-%COMP%]{margin-top:-1.5rem;padding-left:3rem;padding-bottom:0}.txt-search[_ngcontent-%COMP%]{width:190px}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[m.Bz.forChild(R),m.Bz]}),e})();var w=a(5702),J=a(5047);let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[f.ez,u.u5,b.Pc,z.hJ,M.S,w.kW,J.L$,h.V,p.U$,_.j,U]}),e})()}}]);